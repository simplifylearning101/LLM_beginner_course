Excellent job with structured data extraction\! That's a fundamental skill. For **Week 2: Hour 5**, we're going to explore another powerful aspect of LLMs: **Text Transformation and Summarization**. This involves changing text from one form to another, whether it's condensing information, changing its tone, or rephrasing for a different audience.

-----

### **Week 2: Hour 5 - Text Transformation & Summarization Programmatically**

#### **30% Theory: Manipulating Text to Your Needs**

  * **Objective:** To understand the various types of text transformation LLMs can perform, specifically focusing on summarization and style/tone changes, and how to programmatically control these operations.

  * **The Power of Text Transformation:**

      * LLMs are masters of language. This capability isn't just for generation but also for sophisticated manipulation of existing text.
      * This allows you to repurpose content, adapt it for different platforms, or simply make it more digestible.

  * **Key Transformation Use Cases:**

    1.  **Summarization:**

          * **Extractive:** Pulling out key sentences or phrases directly from the original text.
          * **Abstractive:** Generating new sentences and phrases that capture the main ideas of the original, without necessarily using the exact words. LLMs excel at this.
          * **Control:** You can control length (sentences, paragraphs, word count), focus (key points, specific aspects), and audience (explain to a child, professional summary).

    2.  **Style/Tone Transfer:**

          * **What it is:** Changing the emotional register or formality of text.
          * **Examples:** From formal to informal, professional to friendly, objective to persuasive, or vice-versa.
          * **Prompting:** Explicitly instruct the LLM on the desired tone and provide examples if needed.

    3.  **Paraphrasing/Rephrasing:**

          * **What it is:** Expressing the same meaning in different words. Useful for avoiding plagiarism, simplifying complex language, or generating variations.

    4.  **Expansion/Elaboration:**

          * **What it is:** Taking a brief idea or bullet points and expanding them into full paragraphs or articles.

  * **Programmatic Control & Considerations:**

      * **Dynamic Inputs:** The text you want to transform will almost always come from a variable (user input, file content, database).
      * **Clear Instructions + Delimiters:** Crucial for robust transformations. Always define what to transform and how.
      * **`max_tokens`:** Especially important for summarization to control output length.
      * **`temperature`:** Use lower `temperature` for precise summarization or faithful rephrasing, higher `temperature` for creative expansions or diverse stylistic changes.
      * **Iterative Refinement:** You'll often need to try different prompt variations to get the exact summary length or tone you want.

#### **70% Hands-on Session: Implementing Text Transformations in Code**

  * **Objective:** To write Python code that uses LLMs to perform various text transformations, including different types of summarization and tone changes, while dynamically integrating input text. We'll continue with your chosen provider.

  * **Step-by-Step Instructions:**

    1.  **Preparation (5 minutes):**

          * Open VS Code in your `applied_llm_course` folder.
          * Create a new file named `week2_hour5_text_transformation.py`.
          * Ensure your environment variable for your chosen LLM provider's API key is set in your VS Code terminal.

    2.  **Basic Setup (10 minutes):**

          * Copy the boilerplate for your chosen provider (import statements, API key retrieval, client initialization) into `week2_hour5_text_transformation.py`.

    3.  **Task 1: Abstractive Summarization with Length Control (15 minutes):**

          * **Goal:** Summarize a longer piece of text into a specific number of sentences.

          * **Modify `week2_hour5_text_transformation.py`:**

            ```python
            # ... (your existing setup code for your chosen provider) ...

            print("\n--- Abstractive Summarization Example ---")

            article_text = """
            The monarch butterfly (Danaus plexippus) is a milkweed butterfly in the Nymphalidae family. It is perhaps the best known of North American butterflies. Its wings feature an easily recognizable orange and black pattern, with a wingspan ranging from 8.9 to 10.2 cm (3Â½ to 4 in). The monarch is famous for its arduous annual migration. Each autumn, millions of monarchs travel from the United States and Canada to warmer climes in Mexico and coastal California, often covering thousands of miles. This multi-generational journey involves several successive generations of butterflies, each continuing the migration southward. The journey north in the spring is similarly complex. Over the past few decades, monarch populations have seen a significant decline, largely due to habitat loss and the reduction of milkweed, their primary food source, caused by pesticide use and urban development. Conservation efforts are underway to protect their migration routes and breeding grounds.
            """

            desired_summary_length = "two concise sentences"

            instructions = f"""
            Summarize the following text into exactly {desired_summary_length}.
            Focus on the most important aspects of the monarch butterfly's life cycle and current challenges.

            Text to summarize:
            ---
            {article_text}
            ---
            """

            messages = []
            if 'OpenAI' in globals():
                messages.append({"role": "system", "content": "You are an expert at concise summarization."})
            elif 'Anthropic' in globals():
                system_instruction = "You are an expert at concise summarization."

            messages.append({"role": "user", "content": instructions})

            try:
                if 'OpenAI' in globals():
                    response = client.chat.completions.create(
                        model="gpt-3.5-turbo",
                        messages=messages,
                        max_tokens=80, # Adjust max_tokens to roughly fit 2 sentences
                        temperature=0.3 # Keep low for factual summary
                    )
                    llm_output = response.choices[0].message.content
                elif 'genai' in globals():
                    response = model.generate_content(
                        contents=[{"role": "user", "parts": [instructions]}],
                        generation_config=genai.types.GenerationConfig(temperature=0.3, max_output_tokens=80)
                    )
                    llm_output = response.text
                elif 'Anthropic' in globals():
                    message = client.messages.create(
                        model="claude-3-opus-20240229",
                        max_tokens=80,
                        temperature=0.3,
                        messages=messages,
                        system=system_instruction if 'system_instruction' in locals() else None
                    )
                    llm_output = message.content[0].text

                print("\nLLM's Summary:")
                print(llm_output)

            except Exception as e:
                print(f"An error occurred: {e}")
            ```

          * **Run the script.** Check if the summary is close to the desired length and captures the main points. You might need to adjust `max_tokens` iteratively.

    4.  **Task 2: Tone and Audience Transformation (15 minutes):**

          * **Goal:** Take a piece of professional text and transform it into an informal, friendly message suitable for a social media post.

          * **Add this as a separate section to your script:**

            ```python
            # ... (your existing setup code) ...
            print("\n--- Tone Transformation Example ---")

            professional_email = """
            Dear Team,

            This message is to inform you that the quarterly performance review documentation is now available for completion. Please ensure all self-assessments and peer feedback submissions are finalized by end-of-day, Friday, October 27th. Your timely adherence to this deadline is appreciated to facilitate the subsequent review process.

            Best regards,
            [Your Manager's Name]
            """

            instructions = f"""
            Transform the following professional email into a casual and friendly social media announcement.
            Make it engaging for colleagues, include one emoji, and use a lighthearted tone.
            Keep it under 280 characters.

            Email to transform:
            ---
            {professional_email}
            ---
            """

            messages = []
            if 'OpenAI' in globals():
                messages.append({"role": "system", "content": "You are a social media expert and master of friendly communication."})
            elif 'Anthropic' in globals():
                system_instruction = "You are a social media expert and master of friendly communication."

            messages.append({"role": "user", "content": instructions})

            try:
                if 'OpenAI' in globals():
                    response = client.chat.completions.create(
                        model="gpt-3.5-turbo",
                        messages=messages,
                        max_tokens=70, # A guess for 280 chars, often needs adjustment
                        temperature=0.7 # Higher for more creativity/tone shift
                    )
                    llm_output = response.choices[0].message.content
                elif 'genai' in globals():
                    response = model.generate_content(
                        contents=[{"role": "user", "parts": [instructions]}],
                        generation_config=genai.types.GenerationConfig(temperature=0.7, max_output_tokens=70)
                    )
                    llm_output = response.text
                elif 'Anthropic' in globals():
                    message = client.messages.create(
                        model="claude-3-opus-20240229",
                        max_tokens=70,
                        temperature=0.7,
                        messages=messages,
                        system=system_instruction if 'system_instruction' in locals() else None
                    )
                    llm_output = message.content[0].text

                print("\nLLM's Social Media Post:")
                print(llm_output)
                print(f"Character count: {len(llm_output)}")

            except Exception as e:
                print(f"An error occurred: {e}")
            ```

          * **Run the script.** Check the tone, emoji, and character count. You may need to iterate on the `max_tokens` or prompt wording to hit the character target.

    5.  **Task 3: Keyword-Driven Expansion (15 minutes):**

          * **Goal:** Take a few keywords or a brief outline and expand it into a short paragraph.

          * **Add this as a separate section to your script:**

            ```python
            # ... (your existing setup code) ...
            print("\n--- Keyword-Driven Expansion Example ---")

            keywords = "Benefits of remote work: flexibility, productivity, cost savings, global talent pool."

            instructions = f"""
            Expand the following keywords into a compelling paragraph (3-4 sentences) about the benefits of remote work.
            Ensure a positive and persuasive tone.

            Keywords:
            ---
            {keywords}
            ---
            """

            messages = []
            if 'OpenAI' in globals():
                messages.append({"role": "system", "content": "You are a skilled content creator."})
            elif 'Anthropic' in globals():
                system_instruction = "You are a skilled content creator."

            messages.append({"role": "user", "content": instructions})

            try:
                if 'OpenAI' in globals():
                    response = client.chat.completions.create(
                        model="gpt-3.5-turbo",
                        messages=messages,
                        max_tokens=150,
                        temperature=0.8 # Higher for more creative expansion
                    )
                    llm_output = response.choices[0].message.content
                elif 'genai' in globals():
                    response = model.generate_content(
                        contents=[{"role": "user", "parts": [instructions]}],
                        generation_config=genai.types.GenerationConfig(temperature=0.8, max_output_tokens=150)
                    )
                    llm_output = response.text
                elif 'Anthropic' in globals():
                    message = client.messages.create(
                        model="claude-3-opus-20240229",
                        max_tokens=150,
                        temperature=0.8,
                        messages=messages,
                        system=system_instruction if 'system_instruction' in locals() else None
                    )
                    llm_output = message.content[0].text

                print("\nLLM's Expanded Paragraph:")
                print(llm_output)

            except Exception as e:
                print(f"An error occurred: {e}")
            ```

          * **Run the script.** Check if the keywords were effectively expanded into a coherent paragraph.

  * **Conclusion of Hands-on Session:**

      * You've gained practical experience using LLMs for powerful text transformations. From condensing information to changing its style and expanding brief ideas, you now have the programmatic tools to adapt and manipulate text to suit various application needs. This opens up a vast array of possibilities for content automation and dynamic communication.

-----

### **Homework for Hour 5**

  * **Exercise 1: Multi-Purpose Summarizer:**
      * Create a new Python file `week2_hour5_homework_multi_summary.py`.
      * Take a longer news article or blog post (find one online, or use the monarch butterfly text from Task 1).
      * Write a script that prompts the LLM to generate *two different summaries* from the same text:
        1.  A "headline summary" (1 very short sentence, perhaps including emojis if appropriate) for social media.
        2.  A "detailed summary" (3-4 sentences) for an internal report.
      * Use appropriate `max_tokens` and `temperature` for each.
      * **Submit:** Your `week2_hour5_homework_multi_summary.py` script and the two distinct summaries it generates.
  * **Exercise 2: Formal to Friendly (and Back?):**
      * Take a short, complex technical explanation (e.g., a sentence about blockchain or quantum mechanics).
      * **Part A:** Prompt the LLM to rewrite it in a "very simple, friendly way for a 10-year-old."
      * **Part B:** Take the 10-year-old's version and, in a *new* LLM call, prompt the LLM to "rewrite this in a formal, academic tone suitable for a scientific paper."
      * **Submit:** The original technical explanation, both transformed versions, and your code.
  * **Exercise 3: Identify Best Practices:**
      * Looking back at the code you wrote in this session, identify at least two prompt engineering best practices (e.g., use of delimiters, clear instructions, `max_tokens`, `temperature`, persona in `system` message) that were most crucial for achieving the desired text transformations.
      * Explain *why* these practices were important in 2-3 sentences.

-----

You're doing fantastic. Manipulating text with LLMs is a core skill, and you've now got programmatic control over it. Next, we'll look at generating creative content\!